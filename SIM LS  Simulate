#include <stdio.h>
#include <dirent.h>
#include <sys/stat.h>
#include <time.h>

int main(int argc, char **argv){
    const char *path = (argc>1)?argv[1]:".";
    DIR *d = opendir(path);
    struct dirent *de;
    while((de=readdir(d))!=NULL){
        if(de->d_name[0]=='.') continue;
        struct stat st;
        char full[512]; snprintf(full,sizeof(full),"%s/%s",path,de->d_name);
        if(stat(full,&st)==0){
            printf("%10lld %s\n", (long long)st.st_size, de->d_name);
        } else printf("???? %s\n", de->d_name);
    }
    closedir(d);
    return 0;
}
